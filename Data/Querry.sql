CREATE DATABASE QUANLYSINHVIEN
GO

USE QUANLYSINHVIEN
GO

-- 1. SINHVIEN
-- 2. TAIKHOAN
-- 3. LOP
-- 4. KHOA
-- 5. MONHOC
-- 6. HOCPHAN
-- 7. HOCPHANMONHOC

-- 1. SINHVIEN
CREATE TABLE SINHVIEN (
 MASINHVIEN INT IDENTITY PRIMARY KEY
 , HOTEN NVARCHAR(100) NOT NULL
 , DIACHI NVARCHAR(100) NOT NULL
 , DIENTHOAI NVARCHAR(100) NOT NULL
 , MALOP INT NOT NULL
 , FOREIGN KEY (MALOP) REFERENCES DBO.LOP(MALOP)
)
GO


-- 2. TAIKHOAN
CREATE TABLE TAIKHOAN (
 MATAIKHOAN INT IDENTITY PRIMARY KEY
 , TENTAIKHOAN NVARCHAR(100) NOT NULL
 , MATKHAU NVARCHAR(100) NOT NULL
 , MASINHVIEN INT NOT NULL
 , FOREIGN KEY (MASINHVIEN) REFERENCES DBO.SINHVIEN(MASINHVIEN)
)
GO


-- 3. LOP
CREATE TABLE LOP (
 MALOP INT IDENTITY PRIMARY KEY
 , TENLOP NVARCHAR(100) NOT NULL
)
GO


-- 4. KHOA
CREATE TABLE KHOA (
 MAKHOA INT IDENTITY PRIMARY KEY
 , TENKHOA NVARCHAR(100) NOT NULL
)
GO


-- 5. MONHOC
CREATE TABLE MONHOC (
 MAMONHOC INT IDENTITY PRIMARY KEY
 , TENMONHOC NVARCHAR(100) NOT NULL
 , SOTINCHI INT NOT NULL
 , MAKHOA INT NOT NULL
 , FOREIGN KEY (MAKHOA) REFERENCES DBO.KHOA(MAKHOA)
)
GO


-- 6. HOCPHAN
CREATE TABLE HOCPHAN (
 MAHOCPHAN INT IDENTITY PRIMARY KEY
 , TENHOCPHAN NVARCHAR(100) NOT NULL
)
GO


-- 7. HOCPHANMONHOC
CREATE TABLE HOCPHANMONHOC (
 MAHOCPHAN INT NOT NULL
 , MAMONHOC INT NOT NULL
 , MASINHVIEN INT NOT NULL
 , UNIQUE (MAHOCPHAN, MAMONHOC, MASINHVIEN)
 , FOREIGN KEY (MAHOCPHAN) REFERENCES DBO.HOCPHAN(MAHOCPHAN)
 , FOREIGN KEY (MAMONHOC) REFERENCES DBO.MONHOC(MAMONHOC)
 , FOREIGN KEY (MASINHVIEN) REFERENCES DBO.SINHVIEN(MASINHVIEN)
)
GO


-- Insert new user
INSERT INTO dbo.TAIKHOAN
        ( MATAIKHOAN ,
          TENTAIKHOAN ,
          MATKHAU ,
          MASINHVIEN
        )
VALUES  ( 
		  1 ,
	      N'K9' , -- UserName - nvarchar(100)
          N'1' , -- PassWord - nvarchar(1000)
          1  -- Type - int
        )
INSERT INTO dbo.TAIKHOAN
        ( MATAIKHOAN ,
          TENTAIKHOAN ,
          MATKHAU ,
          MASINHVIEN
        )
VALUES  ( 
		  2 ,
		  N'staff' , -- UserName - nvarchar(100)
          N'1' , -- PassWord - nvarchar(1000)
          2  -- Type - int
        )
GO
